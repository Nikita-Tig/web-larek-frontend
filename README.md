# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Архитектура 
Архитектура проекта разрабатывается с использованием MVP паттерна, в котором основными слоями являются:
M –– это модели с данными, отвечают за работу с данными.
V –– это компоненты представления, отвечают за отображение данных на экране.
P –– это презентер, он не будет выделен в отдельный класс а будет содержатся в основном коде файла index.ts.

# Базовый код
1. Класс Component<T>
Находится в основе практически всех частей проекта, реализует методы для работы с информацией товаров и кнопками.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Класс имеет такие методы:
•	setText, setImage –– для установки текстов и картинок.
•	toggleClass –– для переключения класса.
•	setDisabled –– для блокировки кнопок.
•	render –– для возврата корневого DOM-элемента.

2. Класс ShopApi
Класс, который облегчает работу с API, а именно запрос товаров с сервера и отправку всех приобретенных товаров и данные покупателя на сервер. 
Класс имеет такие методы:
•	getProducts –– для получения продуктов из сервера.
•	sendOrder –– для отправки товаров и данных о покупке на сервер.

3. Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Класс имеет методы on,  off,  emit — для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
Дополнительно реализованы методы  onAll и  offAll — для подписки на все события и сброса всех подписчиков.
Дополнением является метод  trigger, генерирующий заданное событие с заданными
аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от
класса  EventEmitter.

# Компоненты модели данных
1. Класс ShopModel 
содержит массив объектов, продуктов, которые находятся на странице.
Конструктор принимает такие аргументы: events: IEvents.
Класс имеет такие методы:
•	setProducts –– для обновления карточек.
•	getProducts –– для получения всех карточек.
•	getProduct –– для получения карточки по id.
•	addProduct –– для добавления продукта в массив.
•	openProduct –– открытия карточки с большей информацией.

2. Класс BasketModel
содержит массив объектов, продуктов, которые находятся в корзине.
Конструктор принимает такие аргументы: events: IEvents.
Класс имеет такие методы:
•	setProducts –– для обновления карточек.
•	getProducts –– для получения всех карточек.
•	getProduct –– для получения карточки по id.
•	addProduct, deleteProduct –– для добавления и удаления продукта из массива корзины.
clearBasket –– для удаления продуктов из массива корзины.
•	getTotalPrice –– для счета общей стоимости продуктов в корзине.

3. Класс OrderModel
Находит тип оплаты, адрес, email, номер телефона.
Конструктор принимает такие аргументы: events: IEvents.
Класс имеет такие методы:
•	validatePaymentType, validateAdress, validateEmail, validatePhone –– проверяет выбран ли тип оплаты, введен ли корректно адрес, email и номер телефона.

# Компоненты представления
1. Класс Shop 
Находит информацию о контейнере куда необходимо выводить карточки товаров.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие контейнера при помощи метода ensureElement и возвращает его как элемент.
Класс имеет такие методы:
•	setCardList –– для вывода карточек в контейнер

2. Класс Basket
Находит информацию о контейнере куда необходимо выводить продукты, положенные в корзину, а также счетчик их количества.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие контейнера и счетчика при помощи метода ensureElement и возвращает его как элемент.
Класс имеет такие методы:
•	setProductList –– для вывода продуктов в контейнер.
•	setTotal –– для вывода количества товаров в корзине на счетчик.

3. Класс Card
Способен хранить id продукта. Находит элементы куда необходимо выводить название, изображение, категорию, цену продукта. А также находит кнопку для открытия popup с детальной информацией о продукте.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие элемента при помощи метода ensureElement и возвращает его как элемент
Класс имеет такие методы:
•	setTitle –– для вывода названия продукта.
•	setImage –– для вывода изображения продукта.
•	setCategory –– для вывода категории продукта.
•	setPrice –– для вывода цену продукта.

4. Класс ItemPopup
Способен хранить id продукта. Находит элементы куда необходимо выводить название, описание, изображение, категорию, цену продукта. А также находит кнопку для добавления продукта в корзину.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие элемента при помощи метода ensureElement и возвращает его как элемент
Класс имеет такие методы:
•	setTitle –– для вывода названия продукта.
•	setDescription –– для вывода названия продукта.
•	setImage –– для вывода изображения продукта.
•	setCategory –– для вывода категории продукта.
•	setPrice –– для вывода цену продукта.

5. Класс ItemBasket
Способен хранить id продукта. Находит элементы куда необходимо выводить название и цену продукта. А также находит кнопку для удаления продукта из корзины.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие элемента при помощи метода ensureElement и возвращает его как элемент
Класс имеет такие методы:
•	setTitle –– для вывода названия продукта.
•	setPrice –– для вывода цену продукта.

6. Класс Payment
Способен хранить id продукта. Находит элемент куда выводить информацию о стоимости покупки, кнопки для выбора способа оплаты, элементы куда необходимо вводить данные. А также находит кнопку для открытия следующего popup с оплатой.
Конструктор принимает такие аргументы: container: HTMLElement, events: EventEmitter.
Конструктор проверяет наличие элемента при помощи метода ensureElement и возвращает его как элемент
Класс имеет такие методы:
•	setSelectedPayment –– для вывода названия продукта.
•	setValue –– для установки значения в поля ввода данных

7. Класс Modals
Класс Modals позволяет открывать и закрывать popup.
Конструктор принимает такие аргументы: events: EventEmitter.
Его методы:
• openModal –– при нажатии на карточку открывает popup с выводом в него основной и дополнительой информацией о товаре.
• closeModal –– при нажатии на кнопку или за пределами карточки закрывает popup.

# Ключевые типы данных

interface IProduct {
    id: string;
    description: string;
    image: string;
    title: string;
    category: string;
    price: number;
} 
продукт

interface IShop {
    cardsList: HTMLElement[]; // список карточек на странице
}

interface IBasket {
    itemsList: HTMLElement[]; // список предметов в корзине
    itemsTotal: number; // количество предметов в корзине
}

interface IPayment {
    value: string; // значение в полях формы
}

# Ключевые события
items:changed –– событие исходящее, когда поменялось количество предметов в корзине
items:deleted –– событие исходящее, когда удалили предмет в корзине
form:submit –– событие исходящее при отправке формы с оплатой
modal:open –– событие исходящее при нажатие на кнопку которая должна вызвать открытие popup
modal:close –– событие исходящее при нажатие на кнопку которая должна вызвать закрытие popup
