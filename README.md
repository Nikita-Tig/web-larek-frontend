# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

# Базовый код

1. Класс MainPage
Класс MainPage выводит на экран все карточки товаров. Его функции: отображать карточки товаров на экране.
Конструктор принимает такие аргументы:
- container: HTMLElement –– контейнер куда выводятся карточки товаров.
- template: HTMLElement –– темплейт для карточки.
- card{}: CardData –– объект карточки.
Класс имеет такие методы:
- productGetter –– запрашивает все товары с сервера.
- renderCard: IView –– для вывода карточки и ее информации в container.

2. Класс Modals
Класс Modals позволяет открывать и закрывать popup.
Конструктор принимает такие аргументы:
- popup: HTMLElement –– popup с которым предстоит работать.
Его методы:
- openModal –– при нажатии на карточку открывает popup с выводом в него основной и дополнительой информацией о товаре.
- closeModal –– при нажатии на кнопку или за пределами карточки закрывает popup.

3. Класс EventEmitter
Реализует паттерн «Наблюдатель» и позволяет подписываться на события и уведомлять подписчиков о наступлении события.
Класс имеет методы on,  off,  emit — для подписки на событие, отписки от события и уведомления подписчиков о наступлении события соответственно.
Дополнительно реализованы методы  onAll и  offAll — для подписки на все события и сброса всех подписчиков.
Дополнением является метод  trigger, генерирующий заданное событие с заданными
аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от
класса  EventEmitter.

# Компоненты модели данных
1. Класс Card
Класс card содержет информацию о карточке, дает возможность взаимодействовать с карточками чтобы отрыть cardPopup. 
Его методы:
- addToBasket –– добавляет товар в корзину при нажатии на кнопку "Купить".

2. Класс Basket
Класс Basket дает возможность взаимодействовать с кнопкой "корзина" чтобы открыть popup с корзиной и ведет счетчик сколько товара в корзине. Выводит в popup все товары добавленные в корзину и их общую стоимость. 
Конструктор принимает такие аргументы:
- counter: HTMLElement –– счетчик товаров в корзине.
- container: HTMLElement –– контейнер куда выводятся карточки товаров.
- template: HTMLElement –– темплейт для карточки.
- compactCard{}: CompactCardData –– объект карточки.
Его методы: 
- cardGetter –– запрашивает картачку по id с сервера.
- renderCounter –– выводит сколько товаров в корзине в counter.
- renderCompactCard: IView –– выводить список товаров в корзину.
- totalPrice –– считать итоговую стоимость товаров.
- deleteCard –– удалять товары из корзины.
- ProcedOrder –– передать информацию о товарах на оплату.

3. Класс PaymentPopup
Класс PaymentPopup спрашивает у покупателя тип оплаты и адрес. Его функции: запросить с покупателя способ оплаты и адрес, разблокировать кнопку "Далее" для перехода в ContactsPopup с контактными данными если все правильно заполненно.
Его методы: 
- verification –– проверяет если все правильно заполненно и разблокирует кнопку "Далее"
- passData –– передает информацию финальному классу.

6. Класс ContactsPopup
Класс ContactsPopup спрашивает у покупателя email и номер телефона. Его функции: запросить с покупателя email и номер телефона, разблокировать кнопку "Далее" для перехода в SuccessPopup с уведомлением о успешной покупкой если все правильно заполненно.
Его методы: 
- verification –– проверяет если все правильно заполненно и разблокирует кнопку "Далее"
- passData –– передает информацию финальному классу.

7. Класс SuccessPopup
Класс SuccessPopup уведомляет об успешной покупкой и сколько покупатель заплатил/заплатит. функции: вывести и передать серверу информацию о покупке.
Конструктор принимает такие аргументы:
- order[] –– информация о товарах с корзины.
- payment: Payment –– информация об оплате.
- contacts: Contacts –– контактные данные.
Его методы: 
- sendOrder: Order –– передать серверу информацию о покупке

Ключевые типы данных
ApiProduct = продукт с сервера
Payment = данные с оплаты
Contacts = контактные данные
Oreder = информация о купленном товаре
CardData = полные данные о товаре для карточки
CompactCardData = сокрощенные данные о товаре для корзины
IBaseModal = интерфейс для работы с модальными окнами
IBasketModel = интерфейс для корзиы
IProduct = продукт
IView = интерфейс для отображения